<div id="contact" class="section">
  <div class="fixed-wrapper">
    <h1>Resource</h1>
  </div>
  <div class="container"> 
    <div class="container block">
      <div class="row">
        <div class="col-4-md col-6-sm">
          <div class="expanded">
            <div class="imgLiquid imgLiquidFill" style="width:300px; height: 300px;">
              <%= image_tag @resource.picture.url(:medium), class:"expanded" %>
            </div>
          </div>
        </div>
        <div class="col-1-md col-1-sm"> &nbsp&nbsp </div>
        <div class="col-4-md col-6-sm">
          <div class="resc-exp-desc">
            <h3><%= @resource.name %></h3>
            <h4>Description:</h4>
            <div>
              <%= @resource.description %>
            </div>
            <h4>Owner:</h4>
            <div>
              <%= link_to @resource.user.name, user_path(@resource.user) %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <% if current_user == @resource.user %>
        <%= link_to 'Edit', edit_user_resource_path(:user_id => current_user.id), class:"btn btn-large btn-danger" %>
    <% else %>
      <% borrow_id = @resource.already_associated_with_borrower?( current_user) %>
      <% if borrow_id %>
          <%= link_to 'Check Status', "/borrows/"+borrow_id.to_s, class:"btn btn-large btn-warning" %>
      <% else %>
          <%= link_to 'Request to borrow!', new_borrow_path(resource: @resource.id), class:"btn btn-large btn-success" %>
      <% end %>
    <% end %>

    <div class="button">
      <%= link_to 'Back', :back, class:"btn btn-large btn-warning" %>
    </div>
  </div>

  
  <div id="map" style='margin-left: 20px;width: 95%; height: 400px;'>
   
  </div>
  


</div>


<% content_for :javascript do %>

  <script>
    $(document).ready(function() {
        $(".imgLiquidFill").imgLiquid({fill:true});
    });

  </script>
  <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
    
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js' type='text/javascript'></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script>

  <script type="text/javascript">
  buildmap(<%= raw @hash.to_json %>);

  // <script>
  //   handler = Gmaps.build('Google');
  //   handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  //     markers = handler.addMarkers(<%= raw @hash.to_json %>);
  //   handler.bounds.extendWith(markers);
  //   handler.fitMapToBounds();
  //   handler.getMap().setZoom(17);
  //   });


  </script>

<% end %>
